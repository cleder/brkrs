# Data Model: Documentation (001-sphinx-docs)

## Entities

- Documentation Source
  - Description: The collection of MyST/Sphinx source files stored in `/docs/` inside the repository.
  - Key attributes: path, file type (markdown/rst), author, last_modified, version
  - Validation rules: Files must parse as MyST; relative links resolved; images under `assets/` or `textures/`

- Rustdoc Artifacts
  - Description: The set of HTML assets generated by `cargo doc --no-deps` for the crate(s).
  - Key attributes: crate_name, version, artifact_path, timestamp
  - Validation rules: HTML index exists, search data present, consistent version metadata

- Build Artifacts (Sphinx site)
  - Description: The combined Sphinx HTML site produced by `sphinx-build` that includes embedded rustdoc output.
  - Key attributes: build_id, branch/tag, version, artifact_path, build_time
  - Validation rules: index.html present, no broken hyperlinks, image references valid

- Publishing Configuration
  - Description: Configuration files and settings for Read the Docs and CI jobs (e.g., `readthedocs.yml`, CI workflows).
  - Key attributes: provider (RTD), webhook config, docs build settings, allowed branches

## Relationships

- Documentation Source -> Build Artifacts: Sphinx pipeline consumes Documentation Source and produces Build Artifacts.
- Rustdoc Artifacts -> Build Artifacts: CI-generated rustdoc content is staged into the Sphinx build dirs to be included in Build Artifacts.
- Build Artifacts -> Read the Docs: Read the Docs publishes Build Artifacts for `main`/`tags`.

## Validation & Lifecycle

- States: Draft (source edits) → PR validated (docs-pr) → Merged → Main build produced → Published (RTD)
- Transition rules: PR validation must succeed before merge; main build must include rustdoc generation and pass checks before RTD publish.

## Scale & Performance assumptions

- Expect a small-to-medium docs site (hundreds of pages, <100MB artifacts).
- rustdoc generation can be the most time-consuming step — caching and incremental builds must be used to meet PR and main build targets.
